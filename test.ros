#!/bin/sh
#|-*- mode:lisp -*-|#
#|
exec ros -Q -- $0 "$@"
|#

(ql:quickload :fiveam)
(ql:quickload :cffi)

(let ((lfp (merge-pathnames "libfixposix/build/src/lib/.libs/")))
  (print lfp)
  (push lfp cffi:*foreign-library-directories*))

(defun test (sys)
  (handler-case
      (progn
        (ql:quickload sys)
        (asdf:test-system sys)
        (fiveam:run sys))
    (serious-condition (c)
      (describe c)
      (uiop:quit 2))))

(defun main (&rest argv)
  (declare (ignorable argv))
  (uiop:quit (if (every #'fiveam::TEST-PASSED-P
                      (test :eazy-gnuplot))
                 0 1)))




